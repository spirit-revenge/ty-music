(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/playVideoPage/playVideoPage"],{"03b0":function(t,e,n){"use strict";n.r(e);var o=n("7a09"),i=n("6f50");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("4042");var r=n("f0c5"),u=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"4eb84e9b",null,!1,o["a"],void 0);e["default"]=u.exports},4042:function(t,e,n){"use strict";var o=n("ce7a"),i=n.n(o);i.a},"6f50":function(t,e,n){"use strict";n.r(e);var o=n("eaca"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"7a09":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uNavbar:function(){return n.e("node-modules/uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"efb4"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"fbf5"))},uLineProgress:function(){return n.e("node-modules/uview-ui/components/u-line-progress/u-line-progress").then(n.bind(null,"d3f2"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"ad26"))},sqComments:function(){return n.e("components/sq/sq-comments").then(n.bind(null,"5c33"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.list,(function(e,n){var o=t.__get_orig(e),i=n!=t.current&&n!=t.current-1&&n!=t.current+1||!e.creator?null:e.creator.map((function(t){return t.userName})).join(",");return{$orig:o,g0:i}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},8711:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("f8a3");o(n("66fd"));var i=o(n("03b0"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ce7a:function(t,e,n){},eaca:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("448a")),a={props:{actived:Boolean},data:function(){return{id:1,type:1,list:[],current:0,processData:{currentTime:0,duration:0},showComment:!1}},computed:{processPer:function(){var t=this.processData,e=t.currentTime,n=t.duration;return Math.ceil(e/n*100)}},watch:{},onLoad:function(t){this.id=t.id,this.type=t.type},onReady:function(){this.getMediaData()},created:function(){},onBackPress:function(){this.pause()},methods:{getMediaData:function(){var t=this,e=this.id,n=this.type;2==n?this.$api.videoDetail({data:{id:e}}).then((function(n){var o=n.data,i={vid:o.vid,title:o.title,videoType:2,coverUrl:o.coverUrl,shareCount:o.shareCount,commentCount:o.commentCount,subCount:o.subCount,creator:[{userName:o.creator.nickname}]};t.list.push(i),t.doPlay(t.current),t.getRelatedAllvideo(e)})).catch((function(){t.getRelatedAllvideo(e)})):this.$api.mvDetail({data:{mvid:e}}).then((function(n){var o=n.data,i={vid:o.id,title:o.name,videoType:1,coverUrl:o.cover,shareCount:o.shareCount,commentCount:o.commentCount,subCount:o.subCount,creator:[{userName:o.artistName}]};t.list.push(i),t.doPlay(t.current),t.getRelatedAllvideo(e)})).catch((function(){}))},onChange:function(t){console.log("onChange",t);var e=t.detail,n=e.current;e.source;try{this.pause(n-1),this.pause(n+1)}catch(t){console.error("暂停视频出错",t)}console.log("------onChange current",n),this.current=n,this.doPlay(n);var o=this.list;n==o.length-1&&this.getRelatedAllvideo(o[o.length-1].vid)},getRelatedAllvideo:function(t){var e=this;this.$api.relatedAllvideo({data:{id:t}}).then((function(t){var n,o=t.data;o.map((function(t){t.videoType=2})),(n=e.list).push.apply(n,(0,i.default)(o)),0==e.current&&e.doPlay(0)}))},doPlay:function(t){var e=this.list[t];e.url?this.play(t):2===e.videoType?this.playVideo(t):this.playMv(t)},playVideo:function(t){var e=this,n=this.list,o=n[t];o&&(console.log("playVideo",o),o.url||this.$api.videoUrl({data:{id:o.vid}}).then((function(n){var i=n.urls;i&&i.length>0?(o.url=i[0],o.urls=i,e.$set(e.list,t,o)):e.showNoneToast({title:"播放地址找不到"})})))},playMv:function(t){var e=this,n=this.list,o=n[t];o&&(o.url||this.$api.mvUrl({data:{id:o.vid}}).then((function(n){var i=n.data;i?(o.url=i,e.$set(e.list,t,o)):e.showNoneToast({title:"播放地址找不到"})})))},videoErrorCallback:function(t){console.error("videoErrorCallback",t)},onLoadedmetadata:function(t){var e=this.current;this.doPlay(e)},onPlay:function(t){console.log("onPlay",t);var e=t.detail,n=t.currentTarget;this.processData=e,this.doPauseAudio();var o=n.dataset.set.index,i=this.list[o];i.playing=!0,this.$set(this.list,o,i)},onUpdateTime:function(t){var e=t.detail;this.processData=e},onPause:function(t){console.log("onPause",t);t.detail;var e=t.currentTarget.dataset.set,n=e.index,o=this.list[n];o.playing=!1,this.$set(this.list,n,o)},openComment:function(){var t=this;this.showComment=!0,this.$nextTick((function(){var e=t.current,n=t.list,o=n[e],i=2===o.videoType?5:1;t.$refs.comments.getList({type:i,id:o.vid})}))},controlstoggle:function(t){console.debug(t,"controlstoggle")},onActive:function(){console.debug("onActive--mv--tab"),this.play()},onHidden:function(){console.debug("onHidden--mv--tab"),this.pause()},pause:function(e){e||(e=this.current);var n=t.createVideoContext("mVideo"+e);n?n.pause():console.log("video 上下文不存在")},play:function(e){e||(e=this.current);var n=t.createVideoContext("mVideo"+e);n?n.play():console.log("video 上下文不存在")},onClickVideo:function(t){console.log("onClickVideo",t);t.detail;var e=t.currentTarget.dataset.set,n=e.index,o=this.list[n],i=o.playing;!0===i?this.pause(n):this.play(n)}}};e.default=a}).call(this,n("543d")["default"])}},[["8711","common/runtime","common/vendor"]]]);